<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <script type="text/javascript">
    //给定一个数组 nums 和滑动窗口的大小 k，请找出所有滑动窗口里的最大值。
    // 输入: nums = [1,3,-1,-3,5,3,6,7], 和 k = 3
    // 输出: [3,3,5,5,6,7] 
      
    // 有n-k+1个滑动窗口（n为数组长度）

    // 暴力解法
    let maxSlidingWindow1 = function(nums, k) {
      if (k === 1) return nums;
      if (!nums.length) return [];

      let res = [];
      while (true) {

        let slideWindow = nums.slice(0,k);
        //  如果滑动窗口等于数组的长度，则说明此时已经是最后一个滑动窗口
        if (nums.length === k) {
            res.push(Math.max(...slideWindow));
            break;
        } else {
            res.push(Math.max(...slideWindow));
            nums.shift()
        }
        
      }

      return res;
    }; 

    // 
    let maxSlidingWindow12 = function(nums, k) {
     if (!nums.length) return []

    let res = []
    // 维护一个单调递减队列，队头元素最大，注意对列存储的是对应的数在原数组中的下标
    let queue = []

    for (let i=0; i<nums.length; i++) {
      // 滑动窗口右移一位，则删除出窗元素
      if (i>=k && queue[0] <=i-k) queue.shift()
      // 后面进来的元素比队尾元素大，则队尾元素出去
      while(queue.length && nums[queue[queue.length-1]] < nums[i]) queue.pop() 
      queue.push(i)
      // 满足滑动窗口长度
      if (i >= k-1) res.push(nums[queue[0]])
    }

    return res

    // setTimeout(() => {
    //   console.log('setTimeout')
    // },1000)

    // let promise1;
    // let promise = new Promise((resolve, reject) => {
    //   resolve();
    // });
    // promise.then(() => {
    //   console.log('promise1');
    //   promise1 = new Promise((resolve, reject) => {
    //    resolve()
        
    //   })
    //   promise1.then(() => {
    //   console.log('promise2')
    // })
    // });
    
    // console.log('1')
    }
  </script>
</body>
</html>